<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McDonald's Burger Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #FFC72C 0%, #DA291C 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 1000px;
            width: 100%;
        }

        .game-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .game-layout {
                grid-template-columns: 1fr;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo {
            font-size: 32px;
            font-weight: bold;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: #FFC72C;
            border-radius: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 14px;
            color: #333;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #DA291C;
        }

        .hearts {
            color: #DA291C;
            font-size: 28px;
        }

        .order-section {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 10px;
            border: 3px dashed #DA291C;
            height: fit-content;
        }

        .order-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #DA291C;
        }

        .order-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .order-item {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            border: 2px solid #DA291C;
            text-align: center;
        }

        .burger-building {
            background: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            min-height: 500px;
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .burger-stack {
            position: relative;
            width: 250px;
            height: 100%;
            margin: 0 auto;
        }

        .building-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .ingredient {
            width: 250px;
            height: 40px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        @keyframes slideIn {
            from {
                transform: translateX(-50%) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        .ingredient.bun {
            background: linear-gradient(to bottom, #d4a574, #c89960);
            border: 2px solid #b8935f;
        }

        .ingredient.patty {
            background: linear-gradient(to bottom, #4a2c1a, #3d2416);
            color: white;
            height: 35px;
            border: 2px solid #2d1a0f;
        }

        .ingredient.patty::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 2px;
            background: rgba(255,255,255,0.1);
            box-shadow: 0 -6px 0 rgba(255,255,255,0.1), 0 6px 0 rgba(255,255,255,0.1);
        }

        .ingredient.cheese {
            background: linear-gradient(to bottom, #ffd700, #ffb700);
            height: 28px;
            border: 2px solid #e6a800;
        }

        .ingredient.cheese::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 10px;
            right: 10px;
            height: 8px;
            background: linear-gradient(to bottom, #ffd700, transparent);
            border-radius: 0 0 50% 50%;
        }

        .ingredient.lettuce {
            background: linear-gradient(135deg, #90ee90 0%, #7bcf7b 50%, #90ee90 100%);
            height: 28px;
            border: 2px solid #6fb86f;
        }

        .ingredient.lettuce::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255,255,255,0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255,255,255,0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0,0,0,0.1) 0%, transparent 60%);
        }

        .ingredient.tomato {
            background: linear-gradient(to bottom, #ff6b6b, #ff4747);
            color: white;
            height: 26px;
            border: 2px solid #e63946;
        }

        .ingredient.tomato::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 15%;
            width: 8px;
            height: 8px;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
            box-shadow: 
                20px 2px 0 -1px rgba(255,255,255,0.3),
                40px -1px 0 -2px rgba(255,255,255,0.3);
        }

        .ingredient.onion {
            background: linear-gradient(to bottom, #f5f5dc, #ede5c8);
            height: 26px;
            border: 2px solid #d4cab0;
        }

        .ingredient.onion::before {
            content: '';
            position: absolute;
            top: 30%;
            left: 10%;
            right: 10%;
            height: 1px;
            background: rgba(0,0,0,0.1);
            border-radius: 50%;
            box-shadow: 
                0 4px 0 rgba(0,0,0,0.1),
                0 8px 0 rgba(0,0,0,0.1);
        }

        .ingredient.sauce {
            background: linear-gradient(to bottom, #d32f2f, #b71c1c);
            height: 15px;
            border: 2px solid #8b0000;
            border-radius: 8px;
        }

        .ingredient.sauce::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 5%;
            right: 5%;
            height: 3px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translateY(-50%);
        }

        .controls {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .controls-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .control-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 2px solid #ddd;
            font-size: 12px;
        }

        .key {
            display: inline-block;
            background: #DA291C;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 5px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn-submit {
            background: #27ae60;
            color: white;
        }

        .btn-clear {
            background: #e74c3c;
            color: white;
        }

        .btn-start {
            background: #DA291C;
            color: white;
            font-size: 20px;
            padding: 20px 40px;
        }

        .message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }

        .game-over {
            text-align: center;
            display: none;
        }

        .game-over.show {
            display: block;
        }

        .game-over h2 {
            font-size: 48px;
            color: #DA291C;
            margin-bottom: 20px;
        }

        .final-score {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <div class="logo">üçî McDonald's Burger Builder</div>
        </div>

        <div class="stats">
            <div class="stat">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Lives</div>
                <div class="hearts" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
            </div>
            <div class="stat">
                <div class="stat-label">Orders Completed</div>
                <div class="stat-value" id="orders">0</div>
            </div>
        </div>

        <div id="message" class="message"></div>

        <div id="game-area" class="hidden">
            <div class="game-layout">
                <div class="order-section">
                    <div class="order-title">üìã Current Order:</div>
                    <div class="order-items" id="current-order"></div>
                </div>

                <div class="burger-building">
                    <div class="building-title">üçî Your Burger:</div>
                    <div class="burger-stack" id="burger-stack"></div>
                </div>
            </div>

            <div class="controls">
                <div class="controls-title">‚å®Ô∏è Keyboard Controls:</div>
                <div class="control-grid">
                    <div class="control-item"><span class="key">B</span> Bun</div>
                    <div class="control-item"><span class="key">P</span> Patty</div>
                    <div class="control-item"><span class="key">C</span> Cheese</div>
                    <div class="control-item"><span class="key">L</span> Lettuce</div>
                    <div class="control-item"><span class="key">T</span> Tomato</div>
                    <div class="control-item"><span class="key">O</span> Onion</div>
                    <div class="control-item"><span class="key">S</span> Sauce</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-clear" onclick="clearBurger()">‚úó Clear (Backspace)</button>
            </div>
        </div>

        <div id="start-screen">
            <div style="background: #f8f8f8; padding: 30px; border-radius: 10px; margin-bottom: 20px; border: 3px dashed #DA291C;">
                <h2 style="font-size: 32px; color: #DA291C; margin-bottom: 20px; text-align: center;">How to Play</h2>
                <p style="font-size: 18px; margin-bottom: 15px; color: #333; line-height: 1.6;">
                    üçî Build burgers to match customer orders!<br>
                    ‚å®Ô∏è Use your keyboard to add ingredients<br>
                    ‚úÖ Auto-submits when order is complete<br>
                    ‚ùå Wrong orders will cost you lives!
                </p>
            </div>
            <div style="background: #fff9e6; padding: 30px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
                <h3 style="font-size: 24px; color: #333; margin-bottom: 15px;">Ready to Start?</h3>
                <p style="font-size: 16px; color: #666; margin-bottom: 20px;">You have 3 lives. Don't mess up!</p>
                <button class="btn btn-start" onclick="startGame()">Start Game</button>
            </div>
        </div>

        <div id="game-over-screen" class="game-over">
            <h2>Game Over!</h2>
            <div class="final-score">Final Score: <span id="final-score">0</span></div>
            <div class="final-score" style="font-size: 20px;">Orders Completed: <span id="final-orders">0</span></div>
            <button class="btn btn-start" onclick="restartGame()">Play Again</button>
        </div>
    </div>

    <script>
        const ingredientNames = {
            'b': 'bun',
            'p': 'patty',
            'c': 'cheese',
            'l': 'lettuce',
            't': 'tomato',
            'o': 'onion',
            's': 'sauce'
        };

        const ingredientLabels = {
            'bun': 'Bun',
            'patty': 'Patty',
            'cheese': 'Cheese',
            'lettuce': 'Lettuce',
            'tomato': 'Tomato',
            'onion': 'Onion',
            'sauce': 'Sauce'
        };

        const burgerTemplates = [
            // Simple burgers
            ['b', 'p', 'b'],
            ['b', 'p', 'c', 'b'],
            ['b', 'p', 's', 'b'],
            ['b', 's', 'p', 'c', 'b'],
            
            // Medium complexity
            ['b', 'p', 'l', 'b'],
            ['b', 'l', 'p', 'c', 'b'],
            ['b', 'p', 'c', 's', 'l', 'b'],
            ['b', 'p', 't', 'l', 'b'],
            ['b', 't', 'p', 's', 'l', 'b'],
            ['b', 'p', 'c', 't', 'l', 'b'],
            ['b', 'c', 'p', 's', 't', 'l', 'b'],
            ['b', 'p', 'o', 'b'],
            ['b', 'o', 'p', 's', 'b'],
            ['b', 'p', 'c', 'o', 'l', 'b'],
            ['b', 'l', 'p', 'c', 's', 'o', 'b'],
            
            // Complex burgers
            ['b', 'p', 'c', 'o', 't', 'b'],
            ['b', 't', 'p', 's', 'c', 'o', 'b'],
            ['b', 'p', 'c', 't', 'o', 'l', 'b'],
            ['b', 'o', 'l', 'p', 'c', 's', 't', 'b'],
            ['b', 't', 'o', 'p', 's', 'c', 'l', 'b'],
            ['b', 's', 'l', 't', 'p', 'c', 'o', 'b'],
            ['b', 'o', 't', 'l', 'p', 's', 'c', 'b'],
            
            // Very complex / tall burgers
            ['b', 'p', 'c', 's', 'p', 'c', 'b'],
            ['b', 'l', 'p', 'c', 's', 'p', 'c', 'l', 'b'],
            ['b', 'p', 'c', 'o', 's', 'p', 't', 'l', 'b'],
            ['b', 't', 'l', 'p', 'c', 's', 'p', 'c', 'o', 'b'],
            ['b', 's', 'p', 'c', 't', 'o', 'l', 'p', 'c', 's', 'b'],
            ['b', 'o', 't', 'p', 'c', 's', 'l', 'p', 'c', 't', 'o', 'b'],
            ['b', 'l', 't', 'o', 'p', 's', 'c', 'p', 'c', 's', 'l', 'b'],
            ['b', 's', 'o', 'l', 't', 'p', 'c', 's', 'p', 'c', 't', 'l', 'o', 'b']
        ];

        let score = 0;
        let lives = 3;
        let ordersCompleted = 0;
        let currentOrder = [];
        let currentBurger = [];

        function startGame() {
            score = 0;
            lives = 3;
            ordersCompleted = 0;
            currentBurger = [];
            updateStats();
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-over-screen').classList.remove('show');
            document.getElementById('game-area').classList.remove('hidden');
            generateNewOrder();
            hideMessage();
        }

        function restartGame() {
            startGame();
        }

        function generateNewOrder() {
            const template = burgerTemplates[Math.floor(Math.random() * burgerTemplates.length)];
            currentOrder = [...template];
            displayOrder();
            clearBurger();
        }

        function displayOrder() {
            const orderElement = document.getElementById('current-order');
            orderElement.innerHTML = '';
            currentOrder.forEach(ingredient => {
                const item = document.createElement('div');
                item.className = 'order-item';
                item.textContent = ingredientLabels[ingredientNames[ingredient]];
                orderElement.appendChild(item);
            });
        }

        function addIngredient(key) {
            if (ingredientNames[key]) {
                currentBurger.push(key);
                updateBurgerDisplay();
                checkAutoSubmit();
            }
        }

        function checkAutoSubmit() {
            if (currentBurger.length === currentOrder.length) {
                if (arraysEqual(currentBurger, currentOrder)) {
                    setTimeout(() => submitBurger(), 300);
                }
            }
        }

        let ingredientElements = [];
        let animationFrameId = null;

        function updateBurgerDisplay() {
            const stackElement = document.getElementById('burger-stack');
            
            // Only add the new ingredient, don't recreate everything
            const lastIngredient = currentBurger[currentBurger.length - 1];
            if (lastIngredient) {
                const item = document.createElement('div');
                item.className = `ingredient ${ingredientNames[lastIngredient]}`;
                item.textContent = ingredientLabels[ingredientNames[lastIngredient]];
                item.dataset.id = ingredientElements.length;
                stackElement.appendChild(item);
                
                // Wait for element to render so we can get its height
                requestAnimationFrame(() => {
                    ingredientElements.push({
                        element: item,
                        y: -50, // Start above visible area
                        velocityY: 0,
                        settled: false
                    });
                    
                    if (animationFrameId) {
                        cancelAnimationFrame(animationFrameId);
                    }
                    animatePhysics();
                });
            }
        }

        function getIngredientHeight(element) {
            return element.offsetHeight + 5; // Add small gap between ingredients
        }

        function animatePhysics() {
            const gravity = 1.2;
            const damping = 0.4;
            const stackHeight = document.getElementById('burger-stack').offsetHeight;
            let allSettled = true;

            ingredientElements.forEach((ing, index) => {
                if (ing.settled) return;

                // Apply gravity
                ing.velocityY += gravity;
                ing.y += ing.velocityY;

                // Calculate bottom of container
                let stopY = stackHeight - getIngredientHeight(ing.element);
                
                // Check collision with all previously added ingredients
                for (let i = 0; i < index; i++) {
                    const other = ingredientElements[i];
                    const otherY = other.y;
                    const otherHeight = getIngredientHeight(other.element);
                    const thisHeight = getIngredientHeight(ing.element);
                    
                    // If this ingredient would overlap with the other one
                    const thisBottom = ing.y + thisHeight;
                    const otherBottom = otherY + otherHeight;
                    
                    // Check if we're colliding from above
                    if (thisBottom >= otherY && ing.y <= otherBottom) {
                        // Land on top of this ingredient
                        const landingY = otherY - thisHeight;
                        if (landingY < stopY) {
                            stopY = landingY;
                        }
                    }
                }

                // Check if we've hit the stopping point
                if (ing.y >= stopY) {
                    ing.y = stopY;
                    
                    // Bounce
                    if (Math.abs(ing.velocityY) > 1) {
                        ing.velocityY *= -damping;
                    } else {
                        ing.velocityY = 0;
                        ing.settled = true;
                    }
                }

                // Update position
                ing.element.style.top = ing.y + 'px';
                
                if (!ing.settled) {
                    allSettled = false;
                }
            });

            if (!allSettled) {
                animationFrameId = requestAnimationFrame(animatePhysics);
            }
        }

        function clearBurger() {
            currentBurger = [];
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            ingredientElements = [];
            document.getElementById('burger-stack').innerHTML = '';
        }

        function submitBurger() {
            if (currentBurger.length === 0) {
                showMessage('Add some ingredients first!', 'error');
                return;
            }

            if (arraysEqual(currentBurger, currentOrder)) {
                score += 100;
                ordersCompleted++;
                setTimeout(() => {
                    generateNewOrder();
                    hideMessage();
                }, 500);
            } else {
                lives--;
                showMessage('Wrong order! Lost a life! üíî', 'error');
                if (lives <= 0) {
                    gameOver();
                } else {
                    setTimeout(() => {
                        clearBurger();
                        hideMessage();
                    }, 1500);
                }
            }
            updateStats();
        }

        function arraysEqual(arr1, arr2) {
            if (arr1.length !== arr2.length) return false;
            for (let i = 0; i < arr1.length; i++) {
                if (arr1[i] !== arr2[i]) return false;
            }
            return true;
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('orders').textContent = ordersCompleted;
            const heartsDisplay = '‚ù§Ô∏è'.repeat(lives) + 'üñ§'.repeat(3 - lives);
            document.getElementById('lives').textContent = heartsDisplay;
        }

        function showMessage(text, type) {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            messageElement.className = `message ${type}`;
        }

        function hideMessage() {
            const messageElement = document.getElementById('message');
            messageElement.className = 'message';
        }

        function gameOver() {
            document.getElementById('game-area').classList.add('hidden');
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-orders').textContent = ordersCompleted;
            document.getElementById('game-over-screen').classList.add('show');
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('game-area').classList.contains('hidden')) return;
            
            const key = e.key.toLowerCase();
            
            if (key === 'backspace') {
                e.preventDefault();
                clearBurger();
            } else if (ingredientNames[key]) {
                e.preventDefault();
                addIngredient(key);
            }
        });
    </script>
</body>
</html>